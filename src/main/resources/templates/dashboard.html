<!doctype html>
<html lang="en" class="bg-[#f5f7fa]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link th:href="@{/output.css}" rel="stylesheet">
</head>
<body class="font-pretendard">
<header class="bg-[linear-gradient(135deg,_#667eea_0%,_#764ba2_100%)] w-full text-white
               px-[30px] py-[20px] shadow-[0_2px_4px_rgba(0,0,0,0.1)] flex justify-between items-center">
    <div>
        <h1 class="text-[24px] mb-[5px] font-bold">📊 대시보드</h1>
        <p class="text-[14px] opacity-90">시스템 현황 및 통계</p>
    </div>
    <nav class="flex items-center gap-[15px]">
        <a class="bg-white/20 border border-white/30 text-white px-[16px] py-[8px] rounded-[4px] cursor-pointer
                    text [14px] transition-all duration-300 text-[14px]"
           th:href="@{/admin}">
            ⚙️ 관리자
        </a>
        <form th:action="@{/logout}" method="post" style="display: inline;">
            <button type="submit"
                    class="bg-white/20 border border-white/30 text-white px-[16px] py-[8px] rounded-[4px] cursor-pointer
                    text [14px] transition-all duration-300 text-[14px]">
                로그아웃
            </button>
        </form>
    </nav>
</header>
<div class="max-w-[1400px] mx-auto my-[30px] px-[20px]">
    <div class="grid gap-[20px] mb-[30px]"
         style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#e3f2fd]">
                📦
            </div>
            <div class="flex-1">
                <div class="text-[14px] text-[#666] mb-[5px]">
                    등록 제품
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${productCount}">
                    6
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekProductCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#e8f5e9]">
                ✅
            </div>
            <div class="flex-1">
                <div class="text-[14px] text-[#666] mb-[5px]">
                    정상 이미지
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${normalImageCount}">
                    0
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekNormalImageCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#fff3e0]">
                ⚠️
            </div>
            <div>
                <div class="text-[14px] text-[#666] mb-[5px]">
                    불량 이미지
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${defectImageCount}">
                    1,990
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekDefectImageCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#ffebee]">
                🔍
            </div>
            <div>
                <div class="text-[14px] text-[#666] mb-[5px]">
                    검사 횟수 (오늘)
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${searchCount}">
                    0
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekSearchCount} + '(이번 주)'">
                    +0 (전일 대비)
                </div>
            </div>
        </div>
    </div>
    <h2 class="text-[20px] font-semibold text-[#333] mt-[30px] mb-[15px] pb-[10px] border-b-[2px] border-[#667eea]">
        🕒 최근 검사 내역
    </h2>
    <div class="bg-white p-[25px] rounded-[10px] shadow-[0_2px_8px_rgba(0,0,0,0.1)] mb-[30px]">
        <div class="flex justify-between items-center mb-5">
            <div class="text-[18px] font-semibold text-[#333]">최근 20건</div>
        </div>
        <table class="w-full border-collapse border-spacing-[2px] border-gray-400">
            <thead class="bg-[#f5f7fa]">
            <tr class="table-row">
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    시간
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    제품
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량 유형
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    유사도 점수
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    이상 점수
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    작업자
                </th>
            </tr>
            </thead>
            <tbody class="table-row-group vertical-align-middle ">
            <tr th:each="search : ${searches}">
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{#temporals.format(search.searchedAt, 'yyyy-MM-dd HH:mm:ss')}">2025-11-15 12:49:30</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.productCode} ?: '-'">prod1</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.defectCode} ?: '-'">hole</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.similarityScore} ?: '-'">0.1212</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.anomalyScore} ?: '-'">0.1234</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]">worker</td>
            </tr>
            </tbody>
        </table>
    </div>
    <h2 class="text-[20px] font-semibold text-[#333] mt-[30px] mb-[15px] pb-[10px] border-b-[2px] border-[#667eea]">
        📦 제품별 통계
    </h2>
    <div class="bg-white p-[25px] rounded-[10px] shadow-[0_2px_8px_rgba(0,0,0,0.1)] mb-[30px]">
        <div class="flex justify-start items-center mb-5">
            <div class="text-[18px] font-semibold text-[#333]">제품 목록</div>
        </div>
        <table class="w-full border-collapse border-spacing-[2px] border-gray-400">
            <thead class="bg-[#f5f7fa]">
            <tr class="table-row">
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    제품명
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    정상 이미지
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량 이미지
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    총 검사
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량 검출율
                </th>
            </tr>
            </thead>
            <tbody class="table-row-group vertical-align-middle ">
            <tr th:each="product : ${products}">
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.name}">주조제품</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                th:text="*{product.normalImageCount}">0</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.defectImageCount}">63</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.searchCount}">0</td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]">- (준비중)</td>
            </tr>
            </tbody>
        </table>
        <div class="flex justify-center mt-6">
            <nav>
                <ul class="inline-flex -space-x-px text-[12px]">
                    <!-- Previous -->
                    <li>
                        <a th:if="${!productPage.first}" th:href="@{|?page=${productPage.number-1}|}"
                           class="px-3 py-1 border border-gray-300">이전</a>
                        <span th:if="${productPage.first}"
                              class="px-3 py-1 border border-gray-200 text-gray-400 cursor-not-allowed">이전</span>
                    </li>
                    <!-- Page Numbers -->
                    <li th:each="i : ${#numbers.sequence(0, productPage.totalPages-1)}">
                        <a th:href="@{|?page=${i}|}"
                           th:text="${i + 1}"
                           th:classappend="${productPage.number == i} ? 'font-bold text-[#667eea]' : ''"
                           class="px-3 py-1 border border-gray-200"></a>
                    </li>
                    <!-- Next -->
                    <li>
                        <a th:if="${!productPage.last}" th:href="@{|?page=${productPage.number+1}|}"
                           class="px-3 py-1 border border-gray-300">다음</a>
                        <span th:if="${productPage.last}"
                              class="px-3 py-1 border border-gray-200 text-gray-400 cursor-not-allowed">다음</span>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</body>
</html>