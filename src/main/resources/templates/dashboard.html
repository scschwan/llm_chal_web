<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      class="bg-[#f5f7fa]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link th:href="@{/output.css}" rel="stylesheet">
</head>
<body class="font-pretendard">
<header class="bg-[linear-gradient(135deg,_#667eea_0%,_#764ba2_100%)] w-full text-white
               px-[30px] py-[20px] shadow-[0_2px_4px_rgba(0,0,0,0.1)] flex justify-between items-center">
    <div>
        <h1 class="text-[24px] mb-[5px] font-bold">📊 대시보드</h1>
        <p class="text-[14px] opacity-90">시스템 현황 및 통계</p>
    </div>
    <nav class="flex items-center gap-[15px]">
        <a class="bg-white/20 border border-white/30 text-white px-[16px] py-[8px] rounded-[4px] cursor-pointer
                    text [14px] transition-all duration-300 text-[14px]"
           th:href="@{/admin}">
            ⚙️ 관리자
        </a>
        <form th:action="@{/logout}" method="post" style="display: inline;">
            <button type="submit"
                    class="bg-white/20 border border-white/30 text-white px-[16px] py-[8px] rounded-[4px] cursor-pointer
                    text [14px] transition-all duration-300 text-[14px]">
                로그아웃
            </button>
        </form>
    </nav>
</header>
<div class="max-w-[1400px] mx-auto my-[30px] px-[20px]">
    <div class="grid gap-[20px] mb-[30px]"
         style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#e3f2fd]">
                📦
            </div>
            <div class="flex-1">
                <div class="text-[14px] text-[#666] mb-[5px]">
                    등록 제품
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${productCount}">
                    6
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekProductCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#e8f5e9]">
                ✅
            </div>
            <div class="flex-1">
                <div class="text-[14px] text-[#666] mb-[5px]">
                    정상 이미지
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${normalImageCount}">
                    0
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekNormalImageCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#fff3e0]">
                ⚠️
            </div>
            <div>
                <div class="text-[14px] text-[#666] mb-[5px]">
                    불량 이미지
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${defectImageCount}">
                    1,990
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekDefectImageCount} + '(이번 주)'">
                    +0 (이번 주)
                </div>
            </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-5 transition-transform duration-300
                    hover:-translate-y-[3px] hover:shadow-[0_4px_12px_rgba(0,0,0,0.15)]">
            <div class="flex items-center justify-center rounded-[10px] w-[70px] h-[70px] text-[48px] bg-[#ffebee]">
                🔍
            </div>
            <div>
                <div class="text-[14px] text-[#666] mb-[5px]">
                    검사 횟수 (오늘)
                </div>
                <div class="text-[32px] font-semibold text-[#333]" th:text="${searchCount}">
                    0
                </div>
                <div class="text-[#4caf50] text-[12px] mt-[5px]" th:text="'+' + ${thisWeekSearchCount} + '(이번 주)'">
                    +0 (전일 대비)
                </div>
            </div>
        </div>
    </div>
    <h2 class="text-[20px] font-semibold text-[#333] mt-[30px] mb-[15px] pb-[10px] border-b-[2px] border-[#667eea]">
        📦 제품별 통계
    </h2>
    <div class="bg-white p-[25px] rounded-[10px] shadow-[0_2px_8px_rgba(0,0,0,0.1)] mb-[30px]">
        <div class="flex justify-start items-center mb-5">
            <div class="text-[18px] font-semibold text-[#333]">제품 목록</div>
        </div>
        <table class="w-full border-collapse border-spacing-[2px] border-gray-400">
            <thead class="bg-[#f5f7fa]">
            <tr class="table-row">
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    제품명
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    정상 이미지
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량 이미지
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    총 검사
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량 검출율
                </th>
            </tr>
            </thead>
            <tbody class="table-row-group vertical-align-middle ">
            <tr th:each="product : ${products}">
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.name}">주조제품
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.normalImageCount}">0
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.defectImageCount}">63
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{product.searchCount}">0
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]">- (준비중)</td>
            </tr>
            </tbody>
        </table>
        <div th:replace="~{_fragments/pagination :: controls(page=${productPage},pageParam=${'productPageNumber'})}"></div>
    </div>
    <h2 class="text-[20px] font-semibold text-[#333] mt-[30px] mb-[15px] pb-[10px] border-b-[2px] border-[#667eea]">
        🔎 유사도 검색 결과조회
    </h2>
    <div class="bg-white p-[25px] rounded-[10px] shadow-[0_2px_8px_rgba(0,0,0,0.1)] mb-[30px]">
        <table class="w-full border-collapse border-spacing-[2px] border-gray-400">
            <thead class="bg-[#f5f7fa]">
            <tr class="table-row">
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    검색일자
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    제품명
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    불량명
                </th>
                <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                    수행시간
                </th>
            </tr>
            </thead>
            <tbody class="table-row-group vertical-align-middle ">
            <tr th:each="search : ${searches}">
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{#temporals.format(search.searchedAt, 'yyyy-MM-dd HH:mm:ss')}">2025-11-15 12:49:30
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.productCode} ?: '-'">prod1
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.defectCode} ?: '-'">hole
                </td>
                <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                    th:text="*{search.processingTime} ?: '-'">0.1212
                </td>
            </tr>
            </tbody>
        </table>
        <div th:replace="~{_fragments/pagination :: controls(page=${searchPage},pageParam=${'searchPageNumber'})}"></div>
    </div>
    <h2 class="text-[20px] font-semibold text-[#333] mt-[30px] mb-[15px] pb-[10px] border-b-[2px] border-[#667eea]">
        📄 이상수치, 매뉴얼 생성 및 답변 내역 조회
    </h2>
    <div class="bg-white p-[25px] rounded-[10px] shadow-[0_2px_8px_rgba(0,0,0,0.1)] mb-[30px] ">
        <div class="overflow-x-auto">
            <table class="w-full border-collapse border-spacing-[2px] border-gray-400 min-w-max">
                <thead class="bg-[#f5f7fa]">
                <tr class="table-row">
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        이상 검출 수행 일자
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        제품명
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        불량명
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        불량 유사도 수치
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        이상 수치
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        대응 매뉴얼 생성 모델링
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        대응 매뉴얼 생성 답변 내역
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        매뉴얼 답변 생성 일자
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        매뉴얼 답변 생성 처리 시간
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        피드백 점수
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        피드백 내용
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        작성자명
                    </th>
                    <th class="p-3 text-left font-semibold text-[#333] text-[14px] border-b-2 border-b-[#e0e0e0] table-cell">
                        피드백 생성 일자
                    </th>
                </tr>
                </thead>
                <tbody class="table-row-group vertical-align-middle ">
                <tr th:each="response : ${responses}">
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{#temporals.format(response.executedAt, 'yyyy-MM-dd HH:mm:ss')}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.productName} ?: '-'">prod1
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.defectName} ?: '-'">hole
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.similarityScore} ?: '-'">0.1212
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.anomalyScore}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.modelType}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px] truncate max-w-[500px]"
                        th:text="*{response.guideContent}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{#temporals.format(response.guideGeneratedAt, 'yyyy-MM-dd HH:mm:ss')}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.processingTime}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.feedbackRating}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px] truncate max-w-[300px]"
                        th:text="*{response.feedbackText}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{response.feedbackUser}">2025-11-15 12:49:30
                    </td>
                    <td class="p-3 border-b-[1px] border-b-[#f0f0f0] text-[#666] text-[14px]"
                        th:text="*{#temporals.format(response.feedbackAt, 'yyyy-MM-dd HH:mm:ss')}">2025-11-15 12:49:30
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div th:replace="~{_fragments/pagination :: controls(page=${responsePage},pageParam=${'responsePageNumber'})}"></div>
    </div>
</div>
</body>
</html>